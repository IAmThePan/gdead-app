<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/core-image/core-image.html">
<link rel="import" href="bower_components/paper-progress/paper-progress.html">


<link rel="import" href="player-controls.html">
<link rel="import" href="progress-slider.html">

<polymer-element name="gd-player" attributes="albumArt songTitle songAlt">
    <template>
        <style>
            #player {
                display: flex;
                position: absolute;
                width: 100%;
                height: 80px;
                bottom: 0px;
                background-color: white;
            }
            
            #albumArt {
                width: 80px;
                height: 100%;
            }
            
            #middle {
                padding: 10px;
            }
            #text {
                color: black;
                height: 75px;
                display: flex;
                flex-direction: column;
                justify-content: space-around;
                font-size: 1.2em;
                white-space: nowrap;
                overflow: hidden;
            }
            #songTitle {
                font-weight: 600;
            }
            #playerControls {
                color: black;
                height: 80px;
            }
            
            #progressSlider {
                color: black;
                display: none;
            }
            #progressSlider /deep/ paper-slider::shadow #sliderBar::shadow #activeProgress {
                background-color: teal;
            }
            #progressSlider /deep/ paper-slider::shadow #sliderKnobInner {
                background-color: teal;
            }
            #progressSlider /deep/ paper-slider::shadow #sliderKnobInner::before {
                background-color: teal;
            }
            #progressSlider /deep/ paper-slider::shadow #sliderKnob > #sliderKnobInner::after {
                <!--color: #0f9d58-->
            }
            
            #progressStatic {
                display: block;
                position: absolute;
                bottom: 0;
                width: 100%;
            }
            paper-progress#progressStatic::shadow #activeProgress {
                background-color: teal;
            }
            paper-progress#progressStatic::shadow #progressContainer {
                background-color: transparent;
            }
            
            @media (min-width: 600px) {
                #text {
                    height: 30px;
                    padding-top: 6px;
                    flex-direction: row;
                    justify-content: space-around;
                }
                #progressSlider {
                    display: block;
                }
                #progressStatic {
                    display: none;
                }
            }
        </style>
        
        <div id="player">
            <core-image id="albumArt" sizing="cover" preload fade 
                        placeholder="images/gd-logo.svg"
                        src="{{albumArt}}">
            </core-image>
            <div id="middle" flex layout vertical justified>
                <div id="text">
                    <div id="songTitle">{{songTitle}}</div>
                    <div id="songAlt">{{songAlt}}</div>
                </div>
                <progress-slider id="progressSlider" max="{{songLength}}" value="{{songProgress}}"></progress-slider>
            </div>
            
            
            <player-controls id="playerControls" playing="false"></player-controls>
        </div>
        <paper-progress id="progressStatic" 
                        value="{{songProgress / (songLength + 0.0001) * 100}}">
        </paper-progress>
        
        <audio id="audio">
               <source id="source" type="audio/mpeg">
        </audio>
    </template>
    
    <script>
        Polymer("gd-player", {
            songTitle: "Song Title",
            songAlt: "Album Title or Location",
            albumArt: "images/gd-logo.svg",
            
            songLength: 0,
            songProgress: 0,
            
            //Functions
        });
    </script>
</polymer-element>